<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tutor Availability Calendar</title>
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 50%,#667eea 100%);background-size:400% 400%;animation:gradientShift 15s ease infinite;min-height:100vh;color:#333;padding:20px}
    @keyframes gradientShift{0%,100%{background-position:0% 50%}50%{background-position:100% 50%}}
    .container{max-width:1200px;margin:0 auto}
    .header{background:rgba(255,255,255,.95);border-radius:24px;padding:40px;margin-bottom:30px;box-shadow:0 20px 60px rgba(0,0,0,.15);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.2);position:relative;overflow:hidden;text-align:center}
    .header::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#667eea,#764ba2,#667eea);background-size:200% 100%;animation:shimmer 2s infinite}
    @keyframes shimmer{0%,100%{background-position:0% 50%}50%{background-position:100% 50%}}
    .header h1{color:#2d3748;font-size:2.8rem;font-weight:800;margin-bottom:15px;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
    .header p{color:#718096;font-size:1.1rem;font-weight:500}

    /* NEW gear cog button */
    .settings-btn {
      position: absolute;
      top: 15px;
      right: 15px;
      font-size: 1.6rem;
      text-decoration: none;
      background: rgba(255,255,255,0.85);
      border-radius: 50%;
      padding: 8px 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
      transition: all 0.2s ease;
    }
    .settings-btn:hover {
      background: linear-gradient(135deg,#667eea,#764ba2);
      color: #fff;
      transform: rotate(90deg);
    }

    .filters-container{background:rgba(255,255,255,.95);border-radius:20px;padding:30px;margin-bottom:30px;box-shadow:0 15px 45px rgba(0,0,0,.15);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.2);position:relative;overflow: visible}
    .filters-container::before{content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(102,126,234,.03),rgba(118,75,162,.03));opacity:1}
    .filters-grid{display:grid;grid-template-columns:repeat(2,minmax(240px,1fr));gap:12px;position:relative;z-index:1}
    .filter-group label{display:block;font-weight:700;margin-bottom:12px;color:#2d3748;font-size:1.1rem}
    .filter-group select,.filter-group input{width:100%;max-width:360px;padding:12px 16px;border:2px solid #e2e8f0;border-radius:16px;font-size:16px;font-weight:600;transition:all .3s ease;background:rgba(255,255,255,.9);color:#2d3748}
    .filter-group select:focus,.filter-group input:focus{outline:none;border-color:#667eea;background:#fff;box-shadow:0 0 0 4px rgba(102,126,234,.1);transform:translateY(-2px)}
    .filter-row{display:flex;gap:10px;align-items:center}
    .btn{padding:12px 16px;border-radius:12px;border:2px solid #e2e8f0;background:#fff;font-weight:700;cursor:pointer}
    .btn:hover{border-color:#cbd5e0}
    .calendar-container{background:rgba(255,255,255,.95);border-radius:20px;padding:30px;box-shadow:0 15px 45px rgba(0,0,0,.15);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.2);position:relative;overflow:hidden}
    .calendar-container::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#667eea,#764ba2,#667eea);background-size:200% 100%;animation:shimmer 2s infinite}
    .fc{position:relative;z-index:1}
    .fc .fc-toolbar{margin-bottom:25px}
    .fc .fc-toolbar-title{font-size:1.8rem;font-weight:800;color:#2d3748;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
    .fc .fc-button-primary{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border:none;border-radius:12px;font-weight:600;padding:8px 16px;transition:all .3s ease;box-shadow:0 4px 15px rgba(102,126,234,.3)}
    .fc .fc-button-primary:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(102,126,234,.4);background:linear-gradient(135deg,#5a67d8 0%,#6b46c1 100%)}
    .fc .fc-scrollgrid{border-radius:16px;overflow:hidden;box-shadow:0 8px 25px rgba(0,0,0,.1)}
    .fc .fc-col-header-cell{background:rgba(248,250,252,.9);border-color:rgba(226,232,240,.5);font-weight:700;color:#4a5568;padding:15px 8px}
    .fc .fc-daygrid-day,.fc .fc-timegrid-slot{background:rgba(255,255,255,.9);border-color:rgba(226,232,240,.3);transition:background-color .2s ease}
    .fc .fc-daygrid-day:hover,.fc .fc-timegrid-slot:hover{background:rgba(102,126,234,.05)}
    .fc .fc-day-today{background:linear-gradient(135deg,rgba(102,126,234,.08),rgba(118,75,162,.08))}
    .fc .fc-day-today .fc-daygrid-day-number{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:50%;width:28px;height:28px;display:flex;align-items:center;justify-content:center;font-weight:700;margin:4px}
    .fc-event{border:none;border-radius:8px;font-weight:600;font-size:.85rem;box-shadow:0 3px 12px rgba(0,0,0,.15);transition:all .3s ease;cursor:pointer;margin:2px 0;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)}
    .fc-event:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(0,0,0,.25)}
    .loading-overlay{position:absolute;inset:0;background:rgba(255,255,255,.9);display:flex;justify-content:center;align-items:center;z-index:1000;border-radius:20px;backdrop-filter:blur(10px)}
    .loading-spinner{width:50px;height:50px;border:4px solid rgba(102,126,234,.2);border-left:4px solid #667eea;border-radius:50%;animation:spin 1s linear infinite}
    @keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
    .loading-text{margin-left:15px;font-weight:600;color:#4a5568;font-size:1.1rem}
    .error-message{background:rgba(254,215,215,.9);color:#742a2a;padding:20px;border-radius:12px;border:2px solid rgba(254,178,178,.5);text-align:center;font-weight:600;margin:20px 0}
    .connection-status{position:fixed;top:20px;right:20px;padding:12px 20px;border-radius:20px;font-size:.9rem;font-weight:600;z-index:1000;transition:all .3s ease;backdrop-filter:blur(10px);box-shadow:0 8px 25px rgba(0,0,0,.15)}
    .connection-status.connected{background:rgba(198,246,213,.95);color:#22543d;border:2px solid rgba(154,230,180,.5)}
    .connection-status.error{background:rgba(254,215,215,.95);color:#742a2a;border:2px solid rgba(254,178,178,.5)}
    .connection-status.loading{background:rgba(254,235,200,.95);color:#7c2d12;border:2px solid rgba(251,211,141,.5)}
    .fc-popover{background:rgba(0,0,0,.9);border:none;border-radius:12px;box-shadow:0 15px 35px rgba(0,0,0,.3);backdrop-filter:blur(10px)}
    .fc-popover-header{background:transparent;border:none;color:#fff;font-weight:600;padding:12px 16px 8px}
    .fc-popover-body{color:rgba(255,255,255,.9);padding:8px 16px 12px}
    @media (max-width:768px){body{padding:10px}.header{padding:25px 20px}.header h1{font-size:1.8rem}.filters-container,.calendar-container{padding:20px}.connection-status{position:relative;top:auto;right:auto;margin-bottom:20px;display:inline-block}.fc .fc-toolbar{flex-direction:column;gap:15px}.fc .fc-toolbar-title{font-size:1.4rem;order:-1}}
    .tutor-legend{margin-top:25px;padding-top:25px;border-top:2px solid rgba(226,232,240,.3)}
    .legend-title{font-weight:700;color:#2d3748;margin-bottom:15px;font-size:1.1rem}
    .legend-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px}
    .legend-item{display:flex;align-items:center;gap:10px;font-weight:600;color:#4a5568;padding:8px 12px;background:rgba(248,250,252,.5);border-radius:8px;transition:all .2s ease}
    .legend-item:hover{background:rgba(248,250,252,.8);transform:translateY(-1px)}
    .legend-color{width:16px;height:16px;border-radius:4px;box-shadow:0 2px 6px rgba(0,0,0,.2)}
  
    /* Lightweight subject suggestions dropdown */
    .subject-suggestions{
      position:absolute;
      top: calc(100% + 4px);
      left: 0;
      right: 0;
      background:#fff;
      border:1px solid rgba(226,232,240,.9);
      border-radius:8px;
      max-height:240px;
      overflow-y:auto;
      z-index:1000;
      box-shadow:0 8px 20px rgba(0,0,0,.08);
    }
    .subject-suggestions .item{
      padding:8px 12px;
      cursor:pointer;
      font-size:14px;
    }
    .subject-suggestions .item:hover,
    .subject-suggestions .item.active{
      background:rgba(248,250,252,.9);
    }

  
/* v9: Compact filters bar (preserve theme) */
.filters-bar {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  align-items: center;
}
.filters-bar .control,
.filters-bar select,
.filters-bar input,
.filters-bar button {
  margin: 0;
  vertical-align: middle;
}
@media (max-width: 720px){
  .filters-bar { gap: 6px; }
}

/* v10: inline pair for All Tutors + Add second tutor */
.inline-flex-pair{
  display:inline-flex;
  gap:8px;
  align-items:center;
}
</style>
</head>
<body>
  <div id="connectionStatus" class="connection-status loading">üîÑ Loading calendar...</div>

  <div class="container">
    <div class="header">
      <h1>üìÖ Tutor Availability Calendar</h1>
      <p>View real-time tutor availability and schedule appointments</p>
      <!-- NEW Gear cog button -->
      <a href="settings.html" class="settings-btn" title="Settings">‚öôÔ∏è</a>
    </div>
